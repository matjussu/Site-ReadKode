---
import { getTranslations } from '../../i18n';
import ScrollReveal from '../animated/ScrollReveal';
import FloatingElement from '../animated/FloatingElement';

interface Props {
  locale?: 'fr' | 'en';
}

const { locale = 'fr' } = Astro.props;
const t = getTranslations(locale);

const screenshots = [
  { src: '/images/screenshots/exercise.png', alt: 'Exercise screen', delay: 0 },
  { src: '/images/screenshots/lessons.png', alt: 'Lessons screen', delay: 0.2 },
  { src: '/images/screenshots/profile.png', alt: 'Profile screen', delay: 0.4 },
];
---

<section class="relative py-24 md:py-32 overflow-hidden bg-bg-code">
  <div class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <ScrollReveal client:visible className="text-center mb-16">
      <h2 class="section-title mb-4">
        {t.appPreview.title}
      </h2>
      <p class="section-subtitle mx-auto">
        {t.appPreview.subtitle}
      </p>
    </ScrollReveal>

    <!-- Screenshots showcase -->
    <div class="relative flex items-center justify-center gap-4 md:gap-8 py-8">
      {screenshots.map((screenshot, index) => (
        <ScrollReveal
          client:visible
          delay={screenshot.delay}
          direction={index === 1 ? 'up' : index === 0 ? 'left' : 'right'}
          className={`relative ${index === 1 ? 'z-20 scale-110' : 'z-10 opacity-80'}`}
        >
          <FloatingElement
            client:visible
            duration={6 + index}
            distance={index === 1 ? 15 : 10}
            delay={index * 0.5}
          >
            <div class={`relative ${index === 1 ? 'w-[200px] md:w-[280px]' : 'w-[160px] md:w-[220px] hidden sm:block'}`}>
              <!-- Phone frame -->
              <div class="relative bg-[#1a1a1a] rounded-[2rem] md:rounded-[3rem] p-2 md:p-3 shadow-2xl border border-[#333]">
                <!-- Dynamic Island -->
                <div class="absolute top-2 md:top-4 left-1/2 -translate-x-1/2 w-[60px] md:w-[80px] h-[18px] md:h-[22px] bg-black rounded-full z-20" />

                <!-- Screen -->
                <div class="relative rounded-[1.5rem] md:rounded-[2.5rem] overflow-hidden bg-black aspect-[9/19.5]">
                  <img
                    src={screenshot.src}
                    alt={screenshot.alt}
                    class="w-full h-full object-cover object-top"
                    loading="lazy"
                  />
                </div>
              </div>

              <!-- Glow effect for center screenshot -->
              {index === 1 && (
                <div class="absolute inset-0 -z-10 bg-accent/20 blur-3xl rounded-full scale-75 opacity-50" />
              )}
            </div>
          </FloatingElement>
        </ScrollReveal>
      ))}
    </div>

    <!-- Decorative elements -->
    <div class="absolute top-20 left-10 w-32 h-32 bg-accent/10 rounded-full blur-3xl" />
    <div class="absolute bottom-20 right-10 w-40 h-40 bg-warning/10 rounded-full blur-3xl" />
  </div>
</section>
